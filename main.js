(()=>{"use strict";var e=document.querySelector("#card-template").content.querySelector(".card"),t=function(t,o,n,r){var p=e.cloneNode(!0),u=p.querySelector(".card__delete-button"),c=p.querySelector(".card__like-button");p.querySelector(".card__title").textContent=t.name;var i=p.querySelector(".card__image");return i.src=t.link,i.alt=t.name,i.addEventListener("click",(function(){n(t)})),u.addEventListener("click",(function(){o(p)})),c.addEventListener("click",(function(){r(c)})),p},o=function(e){e.remove()},n=function(e){e.classList.toggle("card__like-button_is-active")},r=function(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",u),document.addEventListener("click",c)},p=function(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",u),document.removeEventListener("click",c)},u=function(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");p(t)}},c=function(e){e.target.classList.contains("popup_is-opened")&&p(e.target)};function i(e,t,o,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n.inputErrorClass),r.textContent=o,r.classList.add(n.errorClass)}function a(e,t,o){var n=e.querySelector(".".concat(t.id,"-error"));n&&(t.classList.remove(o.inputErrorClass),n.classList.remove(o.errorClass),n.textContent="")}function s(e,t,o){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(o.inactiveButtonClass),t.disabled=!1):(t.classList.add(o.inactiveButtonClass),t.disabled=!0)}function l(e){Array.from(document.querySelectorAll(e.formSelector)).forEach((function(t){var o=Array.from(t.querySelectorAll(e.inputSelector)),n=t.querySelector(e.submitButtonSelector);o.forEach((function(r){r.addEventListener("input",(function(){!function(e,t,o){if("new-place"===e.name&&"url"===t.type)t.validity.valid?a(e,t,o):i(e,t,t.validationMessage,o);else{t.setCustomValidity("");var n=!0,r="";0===t.value.length?(n=!1,r="Вы пропустили это поле."):t.value.length<t.minLength?(n=!1,r="Минимальное количество символов: ".concat(t.minLength,". Длина текста сейчас: ").concat(t.value.length," символ.")):o.inputRegex.test(t.value)||(n=!1,r=t.dataset.errorMessage||"Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы"),n?a(e,t,o):(t.setCustomValidity(r),i(e,t,r,o))}}(t,r,e),s(o,n,e)}))}))}))}function d(e,t){var o=Array.from(e.querySelectorAll(t.inputSelector)),n=e.querySelector(t.submitButtonSelector);o.forEach((function(o){a(e,o,t)})),s(o,n,t)}l({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",inputRegex:/^[A-Za-zА-Яа-яЁё\-\s]+$/});var _=document.querySelector(".places__list"),m=document.querySelector('.popup__form[name="edit-profile"]'),v=document.querySelector('.popup__form[name="new-place"]'),f=document.querySelector(".profile__title"),y=document.querySelector(".profile__description"),S=document.querySelector(".popup__input_type_name"),b=document.querySelector(".popup__input_type_description"),q=document.querySelector(".popup__input_type_card-name"),k=document.querySelector(".popup__input_type_url"),C=document.querySelector(".profile__edit-button"),g=document.querySelector(".popup_type_edit"),E=document.querySelectorAll(".popup__close"),L=document.querySelector(".profile__add-button"),h=document.querySelector(".popup_type_new-card"),x=document.querySelector(".popup_type_image"),A=document.querySelector(".popup__image"),B=document.querySelector(".popup__caption");function j(e){A.src=e.link,A.alt=e.name,B.textContent=e.name,r(x)}document.querySelectorAll(".popup").forEach((function(e){e.classList.add("popup_is-animated")})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var r=t(e,o,j,n);_.append(r)})),C.addEventListener("click",(function(){S.value=f.textContent,b.value=y.textContent,d(m,{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",inputRegex:/^[a-zA-Zа-яА-ЯёЁ\s-]+$/}),r(g)})),m.addEventListener("submit",(function(e){e.preventDefault();var t=S.value,o=b.value;f.textContent=t,y.textContent=o,p(g)})),L.addEventListener("click",(function(){v.reset(),d(v,{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",inputRegex:/^[a-zA-Zа-яА-ЯёЁ\s-]+$/}),r(h)})),v.addEventListener("submit",(function(e){e.preventDefault();var r=q.value,u=k.value,c=t({name:r,link:u},o,j,n);_.prepend(c),q.value="",k.value="",p(h)})),E.forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".popup");t&&p(t)}))})),l({formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",inputRegex:/^[A-Za-zА-Яа-яЁё\-\s]+$/})})();